
@{
    ViewData["Title"] = "GetDemo";
}

<h1>GetDemo</h1>

<div class="alert alert-danger">
    <div id="div1"></div>
</div>

@section Styles{
    <style>

    </style>
}

@section Scripts{
    <script>
        const name = "Jack";
        const age = 10;


        //步驟一 建立Ajax物件
        const xhr = new XMLHttpRequest();
        
        //步驟二 對伺服器發出要求(Request)
        //xhr.open("GET", "/Api/Index",false);     false 表示改成同步的執行模式
        //傳遞的參數不須經過Sever端處理路徑，放在最後面，如要塞入變數則用`${}`包起來
        xhr.open("GET", `@Url.Action("getDemo","Api")?name=${name}&age=${age}`); 
        xhr.send();

        //步驟三 接收伺服器回傳的資料
        xhr.addEventListener("load", function () {
                const data = xhr.responseText;
                //步驟四 讀資料 JSON/ XML
                //步驟五 顯示資料
                //要找到想要控制的標籤
                document.querySelector('#div1').innerHTML = `<h3>${data}</h3>`;
         })

    </script>
}